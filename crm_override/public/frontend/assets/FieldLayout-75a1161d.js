import{g as Ve,f as H,u as Je,b as Ae,d as Ye,e as Pe,_ as ze}from"./modals-062b592e.js";import{D as ne,b as $e,E as ye,d as De,_ as Se}from"./DragVerticalIcon-fa78fa9d.js";import{I as qe}from"./IndicatorIcon-12e98f89.js";import{b as ie,D as xe,g as se,u as ge,_ as ce,x as me,y as X,B as He,r as Ce}from"./index-d7cc16ab.js";import{N as Q,O as Z,l as N,y as E,e as j,f as a,c as $,d as y,F as ee,r as le,g as v,w as V,b as h,a1 as q,ai as fe,B as R,G as _e,t as T,u as t,ay as Ke,W as Fe,X as be,z as Re,n as A,L as We,M as Xe,a6 as pe,a as Qe,ag as Ze,af as el,a3 as ll,aa as tl,_ as he,k as P,I as z,m as al,aK as ve,C as we,V as de,Y as Le,P as ae,a9 as nl,a8 as ol}from"./index-69690053.js";import{_ as re,a as Me}from"./Link-f750ab7e.js";const sl={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},il={class:"w-full"},rl=["onClick"],ul={__name:"TableMultiselectInput",props:Q({doctype:{type:String,required:!0},errorMessage:{type:Function,default:m=>`${m} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:Q(["change"],["update:modelValue"]),setup(m,{emit:c}){const o=m,D=c,{getFields:G}=ie(o.doctype),S=Z(m,"modelValue"),O=N([]),L=N(null),U=N(""),M=N(""),x=E(()=>M.value?{name:["not in",b.value]}:[]),b=E(()=>(L.value="",u(),M.value?S.value.map(n=>n[M.value.fieldname]):[])),u=()=>{if(L.value="",!M.value){let n=G();M.value=n==null?void 0:n.find(f=>["Link","User"].includes(f.fieldtype)),M.value||(L.value="Table MultiSelect requires a Table with atleast one Link field")}return M.value},e=n=>{if(L.value=null,S.value.some(f=>f[M.value.fieldname]===n)){L.value="Value already exists";return}n&&(S.value.push({[M.value.fieldname]:n}),D("change",S.value),!L.value&&(U.value=""))},F=n=>{let f=S.value.filter(l=>l[M.value.fieldname]!==n);D("change",f)},g=()=>{var f;if(U.value)return;let n=(f=O.value[O.value.length-1])==null?void 0:f.$el;document.activeElement===n?(S.value.pop(),D("change",S.value),_e(()=>{S.value.length&&(n=O.value[O.value.length-1].$el,n==null||n.focus())})):n==null||n.focus()};return(n,f)=>{const l=j("FeatherIcon"),s=j("Button"),w=j("ErrorMessage");return a(),$("div",null,[y("div",sl,[(a(!0),$(ee,null,le(b.value,C=>(a(),v(s,{ref_for:!0,ref_key:"valuesRef",ref:O,key:C,label:C,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:fe(q(g,["stop"]),["delete"])},{suffix:V(()=>[h(l,{class:"h-3.5",name:"x",onClick:q(d=>F(C),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),y("div",il,[M.value?(a(),v(re,{key:0,class:"form-control flex-1 truncate cursor-text",value:U.value,filters:x.value,doctype:M.value.options,onChange:f[0]||(f[0]=C=>e(C)),hideMe:!0},{target:V(({togglePopover:C})=>[y("button",{class:"w-full h-7 cursor-text",onClick:q(C,["stop"])},null,8,rl)]),_:1},8,["value","filters","doctype"])):R("",!0)])]),L.value?(a(),v(w,{key:0,class:"mt-2 pl-2",message:L.value},null,8,["message"])):R("",!0)])}}},dl={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},cl={class:"mt-4"},ml={class:"text-base text-ink-gray-8 mb-2"},pl={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},vl={class:"flex items-center gap-2"},fl={class:"flex items-center gap-2"},yl={class:"flex flex-col gap-1 text-ink-gray-9"},gl={class:"text-ink-gray-4 text-sm"},_l={class:"flex items-center gap-2 justify-end"},bl={__name:"GridFieldsEditorModal",props:Q({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const c=m,{getFields:o,getGridViewSettings:D,saveUserSettings:G}=ie(c.doctype),S=Z(m,"modelValue"),O=N(!1),L=N(null),U=E(()=>JSON.stringify(x.value)!==JSON.stringify(M.value)),M=E(()=>{let f=o(),l=D(c.parentDoctype);return l.length?l.map(s=>{let w=f.find(C=>C.fieldname===s.fieldname);if(w)return w.columns=s.columns,n(w)}):f==null?void 0:f.filter(s=>s.in_list_view).map(s=>n(s))}),x=N(JSON.parse(JSON.stringify(M.value||[]))),b=E(()=>{var f;return(f=o())==null?void 0:f.filter(l=>!x.value.find(s=>s.fieldname===l.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(l.fieldtype))});function u(){x.value=JSON.parse(JSON.stringify(M.value||[]))}function e(f){x.value.push(n(f))}function F(f){const l=x.value.findIndex(s=>s.fieldname===f.fieldname);x.value.splice(l,1)}function g(){O.value=!0;let f=x.value.map(l=>({fieldname:l.fieldname,columns:l.columns}));if(f.length===0){L.value=__("At least one field is required");return}G(c.parentDoctype,"GridView",f,()=>{O.value=!1,S.value=!1})}function n(f){return{label:f.label,fieldname:f.fieldname,fieldtype:f.fieldtype,options:f.options,in_list_view:f.in_list_view,columns:f.columns||2}}return(f,l)=>{const s=j("Badge"),w=j("TextInput"),C=j("Button");return a(),v(t(Fe),{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=d=>S.value=d)},{"body-title":V(()=>[y("h3",dl,[y("div",null,T(f.__("Edit Grid Fields Layout")),1),U.value?(a(),v(s,{key:0,label:f.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var d,K;return[y("div",cl,[y("div",ml,T(f.__("Fields Order")),1),(d=M.value)!=null&&d.length?(a(),v(t(ne),{key:0,list:x.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:V(({element:I})=>[y("div",pl,[y("div",vl,[h($e,{class:"h-3.5 cursor-grab"}),y("div",null,T(I.label),1)]),y("div",fl,[h(w,{variant:"outline",type:"number",modelValue:I.columns,"onUpdate:modelValue":oe=>I.columns=oe,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),h(C,{variant:"ghost",icon:"x",onClick:oe=>F(I)},null,8,["onClick"])])])]),_:1},8,["list"])):R("",!0),(K=b.value)!=null&&K.length?(a(),v(Me,{key:1,value:"",options:b.value,onChange:l[0]||(l[0]=I=>e(I))},{target:V(({togglePopover:I})=>[h(C,{class:"w-full mt-2",label:f.__("Add Field"),iconLeft:"plus",onClick:oe=>I()},null,8,["label","onClick"])]),"item-label":V(({option:I})=>[y("div",yl,[y("div",null,T(I.label),1),y("div",gl,T(`${I.fieldname} - ${I.fieldtype}`),1)])]),_:1},8,["options"])):R("",!0),L.value?(a(),v(t(Ke),{key:2,class:"mt-3",message:L.value},null,8,["message"])):R("",!0)])]}),actions:V(()=>[y("div",_l,[U.value?(a(),v(C,{key:0,class:"w-full",label:f.__("Reset"),onClick:u},null,8,["label"])):R("",!0),h(C,{class:"w-full",label:f.__("Save"),variant:"solid",onClick:g,loading:O.value,disabled:!U.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},hl={class:"flex flex-col gap-5.5"},kl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},xl=["onClick"],Cl=["onDblclick"],wl={key:0,class:"flex items-center gap-2"},Vl={key:1,class:"flex gap-1 items-center"},$l={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},Dl={class:"flex items-center justify-between"},Sl=["onDblclick"],Fl={key:1,class:"flex gap-2 items-center"},Rl={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Ll={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ml={class:"flex items-center gap-2 truncate"},Ol={class:"truncate"},Bl={class:"gap-2 w-full"},Ul={class:"flex flex-col gap-1 text-ink-gray-9"},Tl={class:"text-ink-gray-4 text-sm"},Gl={class:"mt-5.5"},Nl={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(m){const c=m,o=N(0),D=E(()=>c.tabs.length==1&&!c.tabs[0].label?"prefix":"default"),G=["Geolocation","Attach","Attach Image","HTML","Signature"],S=E(()=>({doctype:c.doctype,restricted_fieldtypes:G,as_array:!0,only_required:c.onlyRequired})),O=be({url:"crm.api.doc.get_fields_meta",params:S.value,cache:["fieldsMeta",c.doctype],auto:!0,transform:b=>{var F;let u=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],e=[];return(F=c.tabs)==null||F.forEach(g=>{var n;(n=g.sections)==null||n.forEach(f=>{var l;(l=f.columns)==null||l.forEach(s=>{e=e.concat(s.fields)})})}),b.filter(g=>!e.find(n=>n.fieldname===g.fieldname)&&!u.includes(g.fieldname))}});function L(){if(c.tabs.length==1&&!c.tabs[0].label){c.tabs[0].label=__("New Tab");return}c.tabs.push({label:__("New Tab"),name:"tab_"+se(),sections:[]}),o.value=c.tabs.length?c.tabs.length-1:0}function U(b,u){u&&b.fields.push(u)}function M(b){return[{label:__("Edit"),icon:"edit",onClick:()=>b.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(c.tabs.length==1){c.tabs[0].label="";return}c.tabs.splice(o.value,1),o.value=o.value?o.value-1:0}}]}function x(b,u,e){let F=u.columns[u.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>u.editingLabel=!0},{label:u.collapsible?__("Uncollapsible"):__("Collapsible"),icon:u.collapsible?"chevron-up":"chevron-down",onClick:()=>u.collapsible=!u.collapsible},{label:u.hideLabel?__("Show label"):__("Hide label"),icon:u.hideLabel?"eye":"eye-off",onClick:()=>u.hideLabel=!u.hideLabel},{label:u.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>u.hideBorder=!u.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1},{label:__("Remove and move columns to {0} section",[b==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let g=e.sections[b==0?b+1:b-1];b==0?g.columns=u.columns.concat(g.columns):g.columns=g.columns.concat(u.columns),e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1&&u.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{c.tabs[o.value-1].sections.push(u),c.tabs[o.value].sections.splice(c.tabs[o.value].sections.indexOf(u),1),o.value-=1},condition:()=>c.tabs[o.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{c.tabs[o.value+1].sections.push(u),c.tabs[o.value].sections.splice(c.tabs[o.value].sections.indexOf(u),1),o.value+=1},condition:()=>c.tabs[o.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{u.columns.push({label:"",name:"column_"+se(),fields:[]})},condition:()=>u.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>u.columns.pop(),condition:()=>u.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let g=u.columns[u.columns.length-2];g.fields=g.fields.concat(F.fields),u.columns.pop()},condition:()=>u.columns.length>1&&F.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{e.sections[b+1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{e.sections[b-1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b-1]}]}]}return Re(()=>c.doctype,()=>O.fetch(S.value),{immediate:!0}),(b,u)=>{const e=j("Input"),F=j("Button"),g=j("FeatherIcon");return a(),$("div",hl,[y("div",kl,[m.tabs.length&&m.tabs[o.value].label?(a(),v(t(ne),{key:0,list:m.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:u[2]||(u[2]=n=>o.value=n.newIndex)},{item:V(({element:n,index:f})=>[y("div",{class:A(["flex items-center gap-2 cursor-pointer rounded",[o.value==f?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",n.editingLabel?"p-1":"px-2 py-1"]]),onClick:l=>o.value=f},[y("div",{onDblclick:()=>n.editingLabel=!0},[n.editingLabel?(a(),$("div",Vl,[h(e,{modelValue:n.label,"onUpdate:modelValue":l=>n.label=l,onKeydown:fe(l=>n.editingLabel=!1,["enter"]),onBlur:l=>n.editingLabel=!1,onClick:u[0]||(u[0]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),n.editingLabel?(a(),v(F,{key:0,icon:"check",variant:"ghost",onClick:l=>n.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",wl,T(b.__(n.label)||b.__("Untitled")),1))],40,Cl),n.label&&o.value==f?(a(),v(t(xe),{key:0,options:M(n),class:"!h-4",onClick:u[1]||(u[1]=q(()=>{},["stop"]))},{default:V(()=>[h(F,{variant:"ghost",class:"!p-1 !h-4"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])):R("",!0)],10,xl)]),_:1},8,["list"])):R("",!0),h(F,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:L,label:b.__("Add Tab")},{[D.value]:V(()=>[h(g,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(a(!0),$(ee,null,le(m.tabs,(n,f)=>We((a(),$("div",{key:n.name},[h(t(ne),{list:n.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:V(({element:l,index:s})=>[y("div",$l,[y("div",Dl,[y("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>l.editingLabel=!0},[l.editingLabel?(a(),$("div",Fl,[h(e,{modelValue:l.label,"onUpdate:modelValue":w=>l.label=w,onKeydown:fe(w=>l.editingLabel=!1,["enter"]),onBlur:w=>l.editingLabel=!1,onClick:u[3]||(u[3]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),l.editingLabel?(a(),v(F,{key:0,icon:"check",variant:"ghost",onClick:w=>l.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",{key:0,class:A(["flex items-center gap-2",{"text-ink-gray-3":l.hideLabel||!l.label,italic:!l.label}])},[pe(T(b.__(l.label)||b.__("No label"))+" ",1),l.collapsible?(a(),v(g,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):R("",!0)],2))],40,Sl),h(t(xe),{options:x(s,l,n)},{default:V(()=>[h(F,{variant:"ghost"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])]),h(t(ne),{class:"flex gap-2",list:l.columns,group:"columns","item-key":"name"},{item:V(({element:w})=>[y("div",Rl,[h(t(ne),{list:w.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:V(({element:C})=>[y("div",Ll,[y("div",Ml,[h($e,{class:"h-3.5 cursor-grab"}),y("div",Ol,T(C.label),1)]),h(F,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:d=>w.fields.splice(w.fields.indexOf(C),1)},null,8,["onClick"])])]),_:2},1032,["list"]),t(O).data?(a(),v(Me,{key:0,value:"",options:t(O).data,onChange:C=>U(w,C)},{target:V(({togglePopover:C})=>[y("div",Bl,[h(F,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",label:b.__("Add Field"),iconLeft:"plus",onClick:d=>C()},null,8,["label","onClick"])])]),"item-label":V(({option:C})=>[y("div",Ul,[y("div",null,T(C.label),1),y("div",Tl,T(`${C.fieldname} - ${C.fieldtype}`),1)])]),_:1},8,["options","onChange"])):R("",!0)])]),_:1},8,["list"])])]),_:2},1032,["list"]),y("div",Gl,[h(F,{class:"w-full h-8",variant:"subtle",label:b.__("Add Section"),iconLeft:"plus",onClick:u[4]||(u[4]=l=>m.tabs[o.value].sections.push({label:b.__("New Section"),name:"section_"+t(se)(),opened:!0,columns:[{name:"column_"+t(se)(),fields:[]}]}))},null,8,["label"])])])),[[Xe,o.value==f]])),128))])}}},Il={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},El={class:"flex flex-col gap-3"},jl={class:"flex justify-between gap-2"},Jl={class:"flex flex-row-reverse gap-2"},Al={key:0},Yl={__name:"GridRowFieldsModal",props:Q({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:Q(["reload"],["update:modelValue"]),setup(m,{emit:c}){const o=m,D=c,G=Z(m,"modelValue"),S=N(o.doctype),O=N(!1),L=N(!1),U=N(!1);function M(){return{doctype:S.value,type:"Grid Row",parent_doctype:o.parentDoctype}}const x=be({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",S.value,o.parentDoctype],params:M(),onSuccess(e){x.originalData=JSON.parse(JSON.stringify(e))}});Re(()=>x==null?void 0:x.data,()=>{L.value=JSON.stringify(x==null?void 0:x.data)!==JSON.stringify(x==null?void 0:x.originalData)},{deep:!0}),Qe(()=>Ze(b,100)());function b(){_e(()=>{x.params=M(),x.reload()})}function u(){let e=JSON.parse(JSON.stringify(x.data));e.forEach(F=>{F.sections&&F.sections.forEach(g=>{g.columns.forEach(n=>{n.fields&&(n.fields=n.fields.map(f=>f.fieldname))})})}),O.value=!0,ll("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:S.value,type:"Grid Row",layout:JSON.stringify(e)}).then(()=>{O.value=!1,G.value=!1,tl("data_fields_layout_builder",{doctype:S.value}),D("reload")})}return(e,F)=>{const g=j("Button");return a(),v(t(Fe),{modelValue:G.value,"onUpdate:modelValue":F[1]||(F[1]=n=>G.value=n),options:{size:"4xl"}},{"body-title":V(()=>[y("h3",Il,[y("div",null,T(e.__("Edit Grid Row Fields Layout")),1),L.value?(a(),v(t(el),{key:0,label:e.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var n;return[y("div",El,[y("div",jl,[h(g,{label:U.value?e.__("Hide preview"):e.__("Show preview"),onClick:F[0]||(F[0]=f=>U.value=!U.value)},null,8,["label"]),y("div",Jl,[h(g,{loading:O.value,label:e.__("Save"),variant:"solid",onClick:u},null,8,["loading","label"]),h(g,{label:e.__("Reset"),onClick:b},null,8,["label"])])]),(n=t(x))!=null&&n.data?(a(),$("div",Al,[U.value?(a(),v(Be,{key:1,tabs:t(x).data,data:{},preview:!0},null,8,["tabs"])):(a(),v(Nl,{key:0,tabs:t(x).data,doctype:S.value},null,8,["tabs","doctype"]))])):R("",!0)])]}),_:1},8,["modelValue"])}}},Pl={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},zl={class:"mb-5 flex items-center justify-between"},ql={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Hl={class:"flex items-center gap-1"},Kl={__name:"GridRowModal",props:Q({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(m){const c=m,{isManager:o}=ge(),D=Z(m,"modelValue"),G=Z(m,"showGridRowFieldsModal"),S=be({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",c.doctype,c.parentDoctype],params:{doctype:c.doctype,type:"Grid Row",parent_doctype:c.parentDoctype},auto:!0});function O(){G.value=!0,_e(()=>D.value=!1)}return(L,U)=>{const M=j("Button"),x=j("Dialog");return a(),v(x,{modelValue:D.value,"onUpdate:modelValue":U[1]||(U[1]=b=>D.value=b),options:{size:"4xl"}},{body:V(()=>[y("div",Pl,[y("div",zl,[y("div",null,[y("h3",ql,T(L.__("Editing Row {0}",[m.index+1])),1)]),y("div",Hl,[t(o)()?(a(),v(M,{key:0,tooltip:L.__("Edit fields layout"),variant:"ghost",class:"w-7",icon:ye,onClick:O},null,8,["tooltip"])):R("",!0),h(M,{icon:"x",variant:"ghost",class:"w-7",onClick:U[0]||(U[0]=b=>D.value=!1)})])]),y("div",null,[t(S).data?(a(),v(Be,{key:0,tabs:t(S).data,data:m.data,doctype:m.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):R("",!0)])])]),_:1},8,["modelValue"])}}},Wl=N(!1),Xl=N(""),Ql=N({}),Zl=N(null);function Oe(m,c,o,D){m&&(o==null||o(),Xl.value=m,Ql.value=c||{},Zl.value=D||null,Wl.value=!0)}const et={class:"flex flex-col flex-1 text-base"},lt={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},tt={key:1,class:"rounded border border-outline-gray-modals"},at={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},nt={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},ot={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},st=["title"],it={key:0,class:"text-ink-red-2"},rt={class:"flex items-center justify-center w-12"},ut=["onClick"],dt={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},ct={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},mt={class:"cursor-pointer"},pt={key:3,class:"flex h-full bg-surface-white justify-center items-center"},vt={class:"edit-row flex items-center justify-center w-12"},ft={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},yt={key:2,class:"mt-2 flex flex-row gap-2"},gt={__name:"Grid",props:Q({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(m){var ke;const c=m,o=P("triggerOnChange",()=>{}),D=P("triggerOnRowAdd",()=>{}),G=P("triggerOnRowRemove",()=>{}),{getGridViewSettings:S,getFields:O,getFloatWithPrecision:L,getCurrencyWithPrecision:U,getFormattedCurrency:M,getGridSettings:x}=ie(c.doctype);ie(c.parentDoctype);const{users:b,getUser:u}=ge(),e=Z(m,"modelValue"),F=Z(m,"parent");z("parentDoc",F);const g=N(new Array(((ke=e.value)==null?void 0:ke.length)||[]).fill(!1)),n=al(new Set),f=N(!1),l=N(!1),s=E(()=>x()),w=E(()=>{let i=S(c.parentDoctype),_=O();return i.length?i.map(W=>d(_.find(te=>te.fieldname===W.fieldname))):(_==null?void 0:_.filter(B=>B.in_list_view).map(B=>d(B)))||[]}),C=E(()=>{var i;return((i=O())==null?void 0:i.map(_=>d(_)))||[]});function d(i){var _;return i.fieldtype==="Link"&&i.options!=="User"&&(i.create||(i.create=(B,W,te,ue)=>{const p=Y=>{Y&&J(Y.name,W,te)};Oe(W.options,B,ue,p)})),i.fieldtype==="Link"&&i.options==="User"&&(i.fieldtype="User",i.link_filters=JSON.stringify({...i.link_filters?JSON.parse(i.link_filters):{},name:["in",(_=b.data.crmUsers)==null?void 0:_.map(B=>B.name)]})),{...i,filters:i.link_filters&&JSON.parse(i.link_filters),placeholder:i.placeholder||i.label}}const K=E(()=>{var _;if(!((_=w.value)!=null&&_.length))return"1fr";let i=S(c.parentDoctype);return i.length?i.map(B=>`minmax(0, ${B.columns||2}fr)`).join(" "):w.value.map(()=>"minmax(0, 2fr)").join(" ")}),I=E(()=>{var i;return(i=e.value)!=null&&i.length?e.value.length===n.size:!1}),oe=E(()=>n.size>0),Ue=i=>{var _;i?(_=e.value)==null||_.forEach(B=>n.add(B.name)):n.clear()},Te=i=>{n.has(i.name)?n.delete(i.name):n.add(i.name)},Ge=()=>{var _;const i={};(_=C.value)==null||_.forEach(B=>{B.fieldtype==="Check"?i[B.fieldname]=!1:i[B.fieldname]="",B.default&&(i[B.fieldname]=Ee(B.default,B.fieldtype))}),i.name=se(10),g.value.push(!1),i.__islocal=!0,i.idx=e.value.length+1,i.doctype=c.doctype,i.parentfield=c.parentFieldname,i.parenttype=c.parentDoctype,e.value.push(i),D(i)},Ne=()=>{e.value=e.value.filter(i=>!n.has(i.name)),G(n,e.value),g.value.pop(),n.clear()},Ie=()=>{e.value.forEach((i,_)=>{i.idx=_+1})};function J(i,_,B){o(_.fieldname,i,B)}function Ee(i,_){if(["Float","Currency","Percent"].includes(_))return X(i);if(_==="Check"){if(["1","true","True"].includes(i))return!0;if(["0","false","False"].includes(i))return!1}else{if(_==="Int")return parseInt(i);if(i==="Today"&&_==="Date")return ae().format("YYYY-MM-DD");if(["Now","now"].includes(i)&&_==="Datetime")return ae().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(i)&&_==="Time")return ae().format("HH:mm:ss");if(_==="Date")return ae(i).format("YYYY-MM-DD");if(_==="Datetime")return ae(i).format("YYYY-MM-DD HH:mm:ss");if(_==="Time")return ae(i).format("HH:mm:ss")}return i}return(i,_)=>{var W,te,ue;const B=j("Button");return a(),$("div",et,[m.label?(a(),$("div",lt,T(i.__(m.label)),1)):R("",!0),(W=w.value)!=null&&W.length?(a(),$("div",tt,[y("div",at,[y("div",nt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:I.value,onClick:_[0]||(_[0]=q(p=>Ue(p.target.checked),["stop"]))},null,8,["modelValue"])]),y("div",ot,T(i.__("No")),1),y("div",{class:"grid w-full truncate",style:we({gridTemplateColumns:K.value})},[(a(!0),$(ee,null,le(w.value,p=>(a(),$("div",{class:A(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(p.fieldtype)?"text-right":""]),key:p.fieldname,title:p.label},[pe(T(i.__(p.label))+" ",1),p.reqd||p.mandatory_depends_on&&p.mandatory_via_depends_on?(a(),$("span",it,"*")):R("",!0)],10,st))),128))],4),y("div",rt,[h(B,{tooltip:i.__("Edit grid fields"),class:"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5",variant:"outline",icon:"settings",onClick:_[1]||(_[1]=p=>f.value=!0)},null,8,["tooltip"])])]),(te=e.value)!=null&&te.length?(a(),v(t(ne),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":_[3]||(_[3]=p=>e.value=p),delay:t(He)()?200:0,group:"rows","item-key":"name",onEnd:Ie},{item:V(({element:p,index:Y})=>[y("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:q(()=>{s.value.editable_grid||(g.value[Y]=!0)},["stop"])},[y("div",dt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:n.has(p.name),onClick:q(r=>Te(p),["stop"])},null,8,["modelValue","onClick"])]),y("div",ct,T(Y+1),1),y("div",{class:"grid w-full h-9.5",style:we({gridTemplateColumns:K.value})},[(a(!0),$(ee,null,le(w.value,r=>(a(),$("div",{class:"border-r border-outline-gray-modals h-full",key:r.fieldname},[r.read_only&&!["Int","Float","Currency","Percent","Check"].includes(r.fieldtype)?(a(),v(t(de),{key:0,type:"text",placeholder:r.placeholder,modelValue:p[r.fieldname],"onUpdate:modelValue":k=>p[r.fieldname]=k,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(r.fieldtype)?(a(),v(re,{key:1,class:"text-sm text-ink-gray-8",value:p[r.fieldname],doctype:r.fieldtype=="Link"?r.options:p[r.options],filters:r.filters,onChange:k=>J(k,r,p),onCreate:(k,je)=>r.create(i.v,r,p,je)},null,8,["value","doctype","filters","onChange","onCreate"])):r.fieldtype==="User"?(a(),v(re,{key:2,class:"form-control",value:t(u)(p[r.fieldname]).full_name,doctype:r.options,filters:r.filters,onChange:k=>J(k,r,p),placeholder:r.placeholder,hideMe:!0},{prefix:V(()=>[h(ce,{class:"mr-2",user:p[r.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":V(({option:k})=>[h(ce,{class:"mr-2",user:k.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:k})=>[h(t(Le),{text:k.value},{default:V(()=>[y("div",mt,T(t(u)(k.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):r.fieldtype==="Check"?(a(),$("div",pt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:p[r.fieldname],"onUpdate:modelValue":k=>p[r.fieldname]=k,disabled:!s.value.editable_grid,onChange:k=>J(k.target.checked,r,p)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):r.fieldtype==="Date"?(a(),v(t(De),{key:4,value:p[r.fieldname],"icon-left":"",variant:"outline",formatter:k=>t(me)(k,"",!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:k=>J(k,r,p)},null,8,["value","formatter","onChange"])):r.fieldtype==="Datetime"?(a(),v(t(Se),{key:5,value:p[r.fieldname],"icon-left":"",variant:"outline",formatter:k=>t(me)(k,"",!0,!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:k=>J(k,r,p)},null,8,["value","formatter","onChange"])):["Small Text","Text","Long Text","Code"].includes(r.fieldtype)?(a(),v(t(de),{key:6,rows:"1",type:"textarea",variant:"outline",value:p[r.fieldname],onChange:k=>J(k.target.value,r,p)},null,8,["value","onChange"])):r.fieldtype==="Select"?(a(),v(t(de),{key:7,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:p[r.fieldname],"onUpdate:modelValue":k=>p[r.fieldname]=k,options:r.options,onChange:k=>J(k.target.value,r,p)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):r.fieldtype==="Password"?(a(),v(Ve,{key:8,variant:"outline",value:p[r.fieldname],disabled:!!r.read_only,onChange:k=>J(k.target.value,r,p)},null,8,["value","disabled","onChange"])):r.fieldtype==="Int"?(a(),v(H,{key:9,class:"[&_input]:text-right",type:"text",variant:"outline",value:p[r.fieldname]||"0",disabled:!!r.read_only,onChange:k=>J(k.target.value,r,p)},null,8,["value","disabled","onChange"])):r.fieldtype==="Percent"?(a(),v(H,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(r.fieldname,p),formattedValue:(p[r.fieldname]||"0")+"%",disabled:!!r.read_only,onChange:k=>J(t(X)(k.target.value),r,p)},null,8,["value","formattedValue","disabled","onChange"])):r.fieldtype==="Float"?(a(),v(H,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(r.fieldname,p),formattedValue:p[r.fieldname],disabled:!!r.read_only,onChange:k=>J(t(X)(k.target.value),r,p)},null,8,["value","formattedValue","disabled","onChange"])):r.fieldtype==="Currency"?(a(),v(H,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(U)(r.fieldname,p),formattedValue:t(M)(r.fieldname,p,F.value),disabled:!!r.read_only,onChange:k=>J(t(X)(k.target.value),r,p)},null,8,["value","formattedValue","disabled","onChange"])):(a(),v(t(de),{key:13,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:p[r.fieldname],"onUpdate:modelValue":k=>p[r.fieldname]=k,options:r.options,onChange:k=>J(k.target.value,r,p)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),y("div",vt,[h(B,{tooltip:i.__("Edit row"),class:"rounded border-0 !text-ink-gray-7",variant:"outline",icon:ye,onClick:r=>g.value[Y]=!0},null,8,["tooltip","onClick"])]),g.value[Y]?(a(),v(Kl,{key:0,modelValue:g.value[Y],"onUpdate:modelValue":r=>g.value[Y]=r,showGridRowFieldsModal:l.value,"onUpdate:showGridRowFieldsModal":_[2]||(_[2]=r=>l.value=r),index:Y,data:p,doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):R("",!0)],8,ut)]),_:1},8,["modelValue","delay"])):(a(),$("div",ft,T(i.__("No Data")),1))])):R("",!0),(ue=w.value)!=null&&ue.length?(a(),$("div",yt,[oe.value?(a(),v(B,{key:0,label:i.__("Delete"),variant:"solid",theme:"red",onClick:Ne},null,8,["label"])):R("",!0),h(B,{label:i.__("Add Row"),onClick:Ge},null,8,["label"])])):R("",!0),l.value?(a(),v(Yl,{key:3,modelValue:l.value,"onUpdate:modelValue":_[4]||(_[4]=p=>l.value=p),doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0),f.value?(a(),v(bl,{key:4,modelValue:f.value,"onUpdate:modelValue":_[5]||(_[5]=p=>f.value=p),doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0)])}}},_t=he(gt,[["__scopeId","data-v-9a2cce41"]]);const bt={key:0,class:"field"},ht={key:0,class:"mb-2 text-sm text-ink-gray-5"},kt={key:0,class:"text-ink-red-2"},xt={key:4,class:"flex items-center gap-2"},Ct={key:0,class:"text-ink-red-3"},wt={key:5,class:"flex gap-1"},Vt={class:"cursor-pointer"},$t={__name:"Field",props:{field:Object},setup(m){const c=m,o=P("data"),D=P("doctype"),G=P("preview"),S=P("isGridRow"),{getFormattedPercent:O,getFormattedFloat:L,getFormattedCurrency:U}=ie(D),{users:M,getUser:x}=ge();let b,u;if(S)b=P("triggerOnChange",()=>{}),u=P("parentDoc");else{const{triggerOnChange:l,triggerOnRowAdd:s,triggerOnRowRemove:w}=Je(D,o.value.name);b=l,z("triggerOnChange",b),z("triggerOnRowAdd",s),z("triggerOnRowRemove",w)}const e=E(()=>{var w;let l=c.field;l.fieldtype=="Select"&&typeof l.options=="string"&&(l.options=l.options.split(`
`).map(C=>({label:C,value:C})),l.options[0].value!==""&&l.options.unshift({label:"",value:""})),l.fieldtype==="Link"&&l.options==="User"&&(l.fieldtype="User",l.link_filters=JSON.stringify({...l.link_filters?JSON.parse(l.link_filters):{},name:["in",(w=M.data.crmUsers)==null?void 0:w.map(C=>C.name)]})),l.fieldtype==="Link"&&l.options!=="User"&&(l.create||(l.create=(C,d)=>{const K=I=>{I&&n(I.name,l)};Oe(l.options,C,d,K)}));let s={...l,filters:l.link_filters&&JSON.parse(l.link_filters),placeholder:l.placeholder||l.label,display_via_depends_on:Ce(l.depends_on,o.value),mandatory_via_depends_on:Ce(l.mandatory_depends_on,o.value)};return s.visible=F(s),s});function F(l){return G.value?!0:(l.fieldtype=="Check"||l.read_only&&o.value[l.fieldname]||!l.read_only)&&(!l.depends_on||l.display_via_depends_on)&&!l.hidden}const g=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.fieldtype)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);function n(l,s){S?b(s.fieldname,l,o.value):b(s.fieldname,l)}function f(l,s){return s.fieldtype==="Duration"?l||0:l}return(l,s)=>{const w=j("FormControl"),C=j("Button");return e.value.visible?(a(),$("div",bt,[e.value.fieldtype!="Check"?(a(),$("div",ht,[pe(T(l.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(a(),$("span",kt,"*")):R("",!0)])):R("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(a(),v(w,{key:1,type:"text",placeholder:g(e.value),modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[0]||(s[0]=d=>t(o)[e.value.fieldname]=d),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(a(),v(_t,{key:2,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[1]||(s[1]=d=>t(o)[e.value.fieldname]=d),parent:t(o),"onUpdate:parent":s[2]||(s[2]=d=>nl(o)?o.value=d:null),doctype:e.value.options,parentDoctype:t(D),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(a(),v(w,{key:3,type:"select",class:A(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[3]||(s[3]=d=>t(o)[e.value.fieldname]=d),onChange:s[4]||(s[4]=d=>n(d.target.value,e.value)),placeholder:g(e.value),description:e.value.description},ol({_:2},[e.value.prefix?{name:"prefix",fn:V(()=>[h(qe,{class:A(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(a(),$("div",xt,[h(w,{class:"form-control",type:"checkbox",modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[5]||(s[5]=d=>t(o)[e.value.fieldname]=d),onChange:s[6]||(s[6]=d=>n(d.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),y("label",{class:"text-sm text-ink-gray-5",onClick:s[7]||(s[7]=()=>{e.value.read_only||(t(o)[e.value.fieldname]=!t(o)[e.value.fieldname])})},[pe(T(l.__(e.value.label))+" ",1),e.value.mandatory?(a(),$("span",Ct,"*")):R("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(a(),$("div",wt,[h(re,{class:"form-control flex-1 truncate",value:t(o)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:t(o)[e.value.options],filters:e.value.filters,onChange:s[8]||(s[8]=d=>n(d,e.value)),placeholder:g(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),t(o)[e.value.fieldname]&&e.value.edit?(a(),v(C,{key:0,class:"shrink-0",label:l.__("Edit"),iconLeft:ye,onClick:s[9]||(s[9]=d=>e.value.edit(t(o)[e.value.fieldname]))},null,8,["label"])):R("",!0)])):e.value.fieldtype==="Table MultiSelect"?(a(),v(ul,{key:6,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[10]||(s[10]=d=>t(o)[e.value.fieldname]=d),doctype:e.value.options,onChange:s[11]||(s[11]=d=>n(d,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(a(),v(re,{key:7,class:"form-control",value:t(o)[e.value.fieldname]&&t(x)(t(o)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:s[12]||(s[12]=d=>n(d,e.value)),placeholder:g(e.value),hideMe:!0},{prefix:V(()=>[t(o)[e.value.fieldname]?(a(),v(ce,{key:0,class:"mr-2",user:t(o)[e.value.fieldname],size:"sm"},null,8,["user"])):R("",!0)]),"item-prefix":V(({option:d})=>[h(ce,{class:"mr-2",user:d.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:d})=>[h(t(Le),{text:d.value},{default:V(()=>[y("div",Vt,T(t(x)(d.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Datetime"?(a(),v(t(Se),{key:8,value:t(o)[e.value.fieldname],formatter:d=>t(me)(d,"",!0,!0),placeholder:g(e.value),"input-class":"border-none",onChange:s[13]||(s[13]=d=>n(d,e.value))},null,8,["value","formatter","placeholder"])):e.value.fieldtype==="Date"?(a(),v(t(De),{key:9,value:t(o)[e.value.fieldname],formatter:d=>t(me)(d,"",!0),placeholder:g(e.value),"input-class":"border-none",onChange:s[14]||(s[14]=d=>n(d,e.value))},null,8,["value","formatter","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(a(),v(w,{key:10,type:"textarea",value:t(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:s[15]||(s[15]=d=>n(d.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(a(),v(Ve,{key:11,value:t(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:s[16]||(s[16]=d=>n(d.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(a(),v(H,{key:12,type:"text",placeholder:g(e.value),value:t(o)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:s[17]||(s[17]=d=>n(d.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(a(),v(H,{key:13,type:"text",value:t(O)(e.value.fieldname,t(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[18]||(s[18]=d=>n(t(X)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(a(),v(H,{key:14,type:"text",value:t(L)(e.value.fieldname,t(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[19]||(s[19]=d=>n(t(X)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(a(),v(H,{key:15,type:"text",value:t(U)(e.value.fieldname,t(o),t(u)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[20]||(s[20]=d=>n(t(X)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(a(),v(w,{key:16,type:"text",placeholder:g(e.value),value:f(t(o)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[21]||(s[21]=d=>n(d.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):R("",!0)}}},Dt=he($t,[["__scopeId","data-v-5283ee04"]]),St={class:"column flex flex-col gap-4 w-full"},Ft={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Rt={__name:"Column",props:{column:Object},setup(m){return(c,o)=>(a(),$("div",St,[m.column.label&&!m.column.hideLabel?(a(),$("div",Ft,T(m.column.label),1)):R("",!0),(a(!0),$(ee,null,le(m.column.fields,D=>(a(),v(Dt,{key:D.fieldname,field:D,"data-name":D.fieldname},null,8,["field","data-name"]))),128))]))}},Lt={__name:"Section",props:{section:Object},setup(m){const c=P("hasTabs");return(o,D)=>m.section.hidden?R("",!0):(a(),$("div",{key:0,class:A(["section",[m.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[h(Ae,{class:A(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":t(c)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":t(c)}],label:m.section.label,hideLabel:m.section.hideLabel||!m.section.label,opened:m.section.opened,collapsible:m.section.collapsible,collapseIconPosition:"right"},{default:V(()=>[(a(!0),$(ee,null,le(m.section.columns,G=>(a(),v(Rt,{key:G.name,class:A({"mt-6":m.section.label&&!m.section.hideLabel}),column:G,"data-name":G.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Mt={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(m){const c=m,o=N(0),D=E(()=>c.tabs.length>1||c.tabs.length==1&&c.tabs[0].label);return z("data",E(()=>c.data)),z("hasTabs",D),z("doctype",c.doctype),z("preview",c.preview),z("isGridRow",c.isGridRow),(G,S)=>(a(),$("div",{class:A(["flex flex-col",{"border border-outline-gray-1 rounded-lg":D.value,"border-outline-gray-modals":D.value}])},[h(t(ze),{as:"div",modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=O=>o.value=O),tabs:m.tabs},{default:V(()=>[h(t(Ye),{class:A(D.value?"border-outline-gray-modals":"hidden")},null,8,["class"]),h(t(Pe),null,{default:V(({tab:O})=>[y("div",{class:A(["sections overflow-hidden",{"my-4 sm:my-5":D.value}])},[(a(!0),$(ee,null,le(O.sections,L=>(a(),v(Lt,{key:L.name,section:L,"data-name":L.name},null,8,["section","data-name"]))),128))],2)]),_:1})]),_:1},8,["modelValue","tabs"])],2))}},Be=he(Mt,[["__scopeId","data-v-0a2ef829"]]);export{Be as F,_t as G,Nl as _,Xl as a,Ql as b,Oe as c,Zl as d,Wl as s};
//# sourceMappingURL=FieldLayout-75a1161d.js.map
