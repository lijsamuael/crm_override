import{l as w,aT as b,j as N,bf as te,y as C,bn as re,bo as ne,I as oe,bj as ae,b8 as se,be as B,aO as $,aN as W,aS as le,bd as ie,bg as z,a as ue,au as pe,v as ce,G as O,bp as de,k as ve,bq as fe,br as k,aZ as g,bs as me,b0 as H,bt as J,aR as he,a7 as ge,aM as be,f as y,g as x,w as I,b as A,u as T,ax as ye,A as D,S as R,K as V,aw as Pe,a6 as ke,t as j,d as S,n as F,c as M,F as q,r as U,B as K,a5 as Q,ae as we,_ as X,ab as Ce,bu as Te,T as L,L as Ie,M as Me,aL as xe,C as Se,b3 as Oe}from"./index-69690053.js";import{i as De}from"./modals-062b592e.js";let Z=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function G(t){var o,l;let u=(o=t.innerText)!=null?o:"",p=t.cloneNode(!0);if(!(p instanceof HTMLElement))return u;let n=!1;for(let d of p.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))d.remove(),n=!0;let e=n?(l=p.innerText)!=null?l:"":u;return Z.test(e)&&(e=e.replace(Z,"")),e}function Re(t){let o=t.getAttribute("aria-label");if(typeof o=="string")return o.trim();let l=t.getAttribute("aria-labelledby");if(l){let u=l.split(" ").map(p=>{let n=document.getElementById(p);if(n){let e=n.getAttribute("aria-label");return typeof e=="string"?e.trim():G(n).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return G(t).trim()}function Fe(t){let o=w(""),l=w("");return()=>{let u=b(t);if(!u)return"";let p=u.innerText;if(o.value===p)return l.value;let n=Re(u).trim().toLowerCase();return o.value=p,l.value=n,n}}var Ee=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ee||{}),Le=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Le||{});function Ae(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Y=Symbol("MenuContext");function _(t){let o=ve(Y,null);if(o===null){let l=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,_),l}return o}let Be=N({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:o,attrs:l}){let u=w(1),p=w(null),n=w(null),e=w([]),d=w(""),v=w(null),i=w(1);function f(r=a=>a){let a=v.value!==null?e.value[v.value]:null,s=he(r(e.value.slice()),P=>b(P.dataRef.domRef)),m=a?s.indexOf(a):null;return m===-1&&(m=null),{items:s,activeItemIndex:m}}let c={menuState:u,buttonRef:p,itemsRef:n,items:e,searchQuery:d,activeItemIndex:v,activationTrigger:i,closeMenu:()=>{u.value=1,v.value=null},openMenu:()=>u.value=0,goToItem(r,a,s){let m=f(),P=fe(r===k.Specific?{focus:k.Specific,id:a}:{focus:r},{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});d.value="",v.value=P,i.value=s??1,e.value=m.items},search(r){let a=d.value!==""?0:1;d.value+=r.toLowerCase();let s=(v.value!==null?e.value.slice(v.value+a).concat(e.value.slice(0,v.value+a)):e.value).find(P=>P.dataRef.textValue.startsWith(d.value)&&!P.dataRef.disabled),m=s?e.value.indexOf(s):-1;m===-1||m===v.value||(v.value=m,i.value=1)},clearSearch(){d.value=""},registerItem(r,a){let s=f(m=>[...m,{id:r,dataRef:a}]);e.value=s.items,v.value=s.activeItemIndex,i.value=1},unregisterItem(r){let a=f(s=>{let m=s.findIndex(P=>P.id===r);return m!==-1&&s.splice(m,1),s});e.value=a.items,v.value=a.activeItemIndex,i.value=1}};return te([p,n],(r,a)=>{var s;c.closeMenu(),re(a,ne.Loose)||(r.preventDefault(),(s=b(p))==null||s.focus())},C(()=>u.value===0)),oe(Y,c),ae(C(()=>se(u.value,{0:B.Open,1:B.Closed}))),()=>{let r={open:u.value===0,close:c.closeMenu};return $({ourProps:{},theirProps:t,slot:r,slots:o,attrs:l,name:"Menu"})}}}),Ne=N({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:o,slots:l,expose:u}){var p;let n=(p=t.id)!=null?p:`headlessui-menu-button-${W()}`,e=_("MenuButton");u({el:e.buttonRef,$el:e.buttonRef});function d(c){switch(c.key){case g.Space:case g.Enter:case g.ArrowDown:c.preventDefault(),c.stopPropagation(),e.openMenu(),O(()=>{var r;(r=b(e.itemsRef))==null||r.focus({preventScroll:!0}),e.goToItem(k.First)});break;case g.ArrowUp:c.preventDefault(),c.stopPropagation(),e.openMenu(),O(()=>{var r;(r=b(e.itemsRef))==null||r.focus({preventScroll:!0}),e.goToItem(k.Last)});break}}function v(c){switch(c.key){case g.Space:c.preventDefault();break}}function i(c){t.disabled||(e.menuState.value===0?(e.closeMenu(),O(()=>{var r;return(r=b(e.buttonRef))==null?void 0:r.focus({preventScroll:!0})})):(c.preventDefault(),e.openMenu(),Ae(()=>{var r;return(r=b(e.itemsRef))==null?void 0:r.focus({preventScroll:!0})})))}let f=De(C(()=>({as:t.as,type:o.type})),e.buttonRef);return()=>{var c;let r={open:e.menuState.value===0},{...a}=t,s={ref:e.buttonRef,id:n,type:f.value,"aria-haspopup":"menu","aria-controls":(c=b(e.itemsRef))==null?void 0:c.id,"aria-expanded":e.menuState.value===0,onKeydown:d,onKeyup:v,onClick:i};return $({ourProps:s,theirProps:a,slot:r,attrs:o,slots:l,name:"MenuButton"})}}}),$e=N({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:o,slots:l,expose:u}){var p;let n=(p=t.id)!=null?p:`headlessui-menu-items-${W()}`,e=_("MenuItems"),d=w(null);u({el:e.itemsRef,$el:e.itemsRef}),le({container:C(()=>b(e.itemsRef)),enabled:C(()=>e.menuState.value===0),accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});function v(r){var a;switch(d.value&&clearTimeout(d.value),r.key){case g.Space:if(e.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),e.search(r.key);case g.Enter:if(r.preventDefault(),r.stopPropagation(),e.activeItemIndex.value!==null){let s=e.items.value[e.activeItemIndex.value];(a=b(s.dataRef.domRef))==null||a.click()}e.closeMenu(),J(b(e.buttonRef));break;case g.ArrowDown:return r.preventDefault(),r.stopPropagation(),e.goToItem(k.Next);case g.ArrowUp:return r.preventDefault(),r.stopPropagation(),e.goToItem(k.Previous);case g.Home:case g.PageUp:return r.preventDefault(),r.stopPropagation(),e.goToItem(k.First);case g.End:case g.PageDown:return r.preventDefault(),r.stopPropagation(),e.goToItem(k.Last);case g.Escape:r.preventDefault(),r.stopPropagation(),e.closeMenu(),O(()=>{var s;return(s=b(e.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case g.Tab:r.preventDefault(),r.stopPropagation(),e.closeMenu(),O(()=>me(b(e.buttonRef),r.shiftKey?H.Previous:H.Next));break;default:r.key.length===1&&(e.search(r.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}function i(r){switch(r.key){case g.Space:r.preventDefault();break}}let f=ie(),c=C(()=>f!==null?(f.value&B.Open)===B.Open:e.menuState.value===0);return()=>{var r,a;let s={open:e.menuState.value===0},{...m}=t,P={"aria-activedescendant":e.activeItemIndex.value===null||(r=e.items.value[e.activeItemIndex.value])==null?void 0:r.id,"aria-labelledby":(a=b(e.buttonRef))==null?void 0:a.id,id:n,onKeydown:v,onKeyup:i,role:"menu",tabIndex:0,ref:e.itemsRef};return $({ourProps:P,theirProps:m,slot:s,attrs:o,slots:l,features:z.RenderStrategy|z.Static,visible:c.value,name:"MenuItems"})}}}),_e=N({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:o,attrs:l,expose:u}){var p;let n=(p=t.id)!=null?p:`headlessui-menu-item-${W()}`,e=_("MenuItem"),d=w(null);u({el:d,$el:d});let v=C(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===n:!1),i=Fe(d),f=C(()=>({disabled:t.disabled,get textValue(){return i()},domRef:d}));ue(()=>e.registerItem(n,f)),pe(()=>e.unregisterItem(n)),ce(()=>{e.menuState.value===0&&v.value&&e.activationTrigger.value!==0&&O(()=>{var h,E;return(E=(h=b(d))==null?void 0:h.scrollIntoView)==null?void 0:E.call(h,{block:"nearest"})})});function c(h){if(t.disabled)return h.preventDefault();e.closeMenu(),J(b(e.buttonRef))}function r(){if(t.disabled)return e.goToItem(k.Nothing);e.goToItem(k.Specific,n)}let a=de();function s(h){a.update(h)}function m(h){a.wasMoved(h)&&(t.disabled||v.value||e.goToItem(k.Specific,n,0))}function P(h){a.wasMoved(h)&&(t.disabled||v.value&&e.goToItem(k.Nothing))}return()=>{let{disabled:h,...E}=t,ee={active:v.value,disabled:h,close:e.closeMenu};return $({ourProps:{id:n,ref:d,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,onClick:c,onFocus:r,onPointerenter:s,onMouseenter:s,onPointermove:m,onMousemove:m,onPointerleave:P,onMouseleave:P},theirProps:{...l,...E},slot:ee,attrs:l,slots:o,name:"MenuItem"})}}});const Ve={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-4"},je=["onClick"],Ke={class:"whitespace-nowrap text-ink-gray-7"},We={key:0,class:"border-t p-1.5"},Ye={__name:"Dropdown",props:{button:{type:Object,default:null},options:{type:Array,default:()=>[]},placement:{type:String,default:"left"}},setup(t){const o=t,l=ge(),u=be(),p={enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"},n=C(()=>{var f;return((f=o.options[0])!=null&&f.group?o.options:[{group:"",items:o.options}]).map((c,r)=>({key:r,group:c.group,hideLabel:c.hideLabel||!1,items:v(c.items)}))}),e=C(()=>o.placement==="left"?"bottom-start":o.placement==="right"?"bottom-end":o.placement==="center"?"bottom-center":o.placement==="right-start"?"right-start":"bottom");function d(i){let f=i.onClick||null;return!f&&i.route&&l&&(f=()=>l.push(i.route)),{name:i.name,label:i.label,icon:i.icon,group:i.group,component:i.component,onClick:f}}function v(i){return(i||[]).filter(Boolean).filter(f=>f.condition?f.condition():!0).map(f=>d(f))}return(i,f)=>(y(),x(T(Be),{as:"div",class:"relative inline-block text-left"},{default:I(({open:c})=>[A(T(ye),{transition:p,show:c,placement:e.value},{target:I(({togglePopover:r})=>[A(T(Ne),{as:"template"},{default:I(()=>[i.$slots.default?D(i.$slots,"default",R(V({key:0},{open:c,togglePopover:r}))):(y(),x(T(Pe),V({key:1,active:c},t.button),{default:I(()=>{var a;return[ke(j(t.button?((a=t.button)==null?void 0:a.label)||null:"Options"),1)]}),_:1},16,["active"]))]),_:2},1024)]),body:I(()=>[S("div",{class:F(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"mt-2":["bottom","left","right"].includes(t.placement),"ml-2":t.placement=="right-start"}])},[A(T($e),{class:F(["min-w-40 divide-y divide-outline-gray-modals",{"left-0 origin-top-left":t.placement=="left","right-0 origin-top-right":t.placement=="right","inset-x-0 origin-top":t.placement=="center","mt-0 origin-top-right":t.placement=="right-start"}])},{default:I(()=>[(y(!0),M(q,null,U(n.value,r=>(y(),M("div",{key:r.key,class:"p-1.5"},[r.group&&!r.hideLabel?(y(),M("div",Ve,j(r.group),1)):K("",!0),(y(!0),M(q,null,U(r.items,a=>(y(),x(T(_e),{key:a.label},{default:I(({active:s})=>[D(i.$slots,"item",V({ref_for:!0},{item:a,active:s}),()=>[a.component?(y(),x(Q(a.component),{key:0,active:s},null,8,["active"])):(y(),M("button",{key:1,class:F([s?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:a.onClick},[a.icon&&typeof a.icon=="string"?(y(),x(T(we),{key:0,name:a.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7","aria-hidden":"true"},null,8,["name"])):a.icon?(y(),x(Q(a.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7"})):K("",!0),S("span",Ke,j(a.label),1)],10,je))])]),_:2},1024))),128))]))),128))]),_:3},8,["class"]),T(u).footer?(y(),M("div",We,[D(i.$slots,"footer")])):K("",!0)],2)]),_:2},1032,["show","placement"])]),_:3}))}},ze={},He={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function qe(t,o){return y(),M("svg",He,[...o[0]||(o[0]=[Ce('<g clip-path="url(#clip0_1191_1930)"><path d="M1.45001 12.1V12.1C1.45001 11.7869 1.60364 11.4936 1.86111 11.3154L6.87595 7.84359C7.52855 7.39178 8.38658 7.36866 9.06257 7.78465L13.5984 10.5759C14.1276 10.9016 14.45 11.4786 14.45 12.1V12.1" stroke="currentColor"></path><path d="M14.45 7.60001L11.95 9.60001M4.45001 9.60001L1.45001 7.60001" stroke="currentColor"></path><path d="M4 9V3C4 2.44772 4.44772 2 5 2H11C11.5523 2 12 2.44772 12 3V9" stroke="currentColor"></path><path d="M4 4.49999L2.1786 6C1.71727 6.37992 1.45002 6.94623 1.45002 7.54385L1.45002 12.1C1.45002 13.2046 2.34545 14.1 3.45002 14.1L12.45 14.1C13.5546 14.1 14.45 13.2046 14.45 12.1V7.51988C14.45 6.93603 14.1949 6.38133 13.7516 6.00137L12 4.5" stroke="currentColor"></path><path d="M6 6H10" stroke="currentColor" stroke-linecap="round"></path><path d="M6 4H9" stroke="currentColor" stroke-linecap="round"></path></g>',1)])])}const et=X(ze,[["render",qe]]),Ue={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(t){t?this.open():this.close()}},created(){if(!(typeof window>"u")&&!document.getElementById("frappeui-popper-root")){const t=document.createElement("div");t.id="frappeui-popper-root",document.body.appendChild(t)}},mounted(){this.listener=t=>{const o=t.target,l=this.$refs.reference,u=this.$refs.popover;if(o===l||o===u||(l==null?void 0:l.contains(o))||(u==null?void 0:u.contains(o)))return;if(!document.getElementById("frappeui-popper-root").contains(o))return this.close();const d=`.${this.popoverContainerClass}`,v=o==null?void 0:o.closest(d),i=l==null?void 0:l.closest(d);v&&i&&v===i&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(t){t=!!t,this.showPropPassed?this.$emit("update:show",t):this.showPopup=t,t===!1?this.$emit("close"):t===!0&&this.$emit("open")}},popupTransition(){let t={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?t[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=Te(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(t){t instanceof Event&&(t=null),t==null&&(t=!this.isOpen),t=!!t,t?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(t){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},Qe={ref:"reference"},Ze={class:"rounded-lg border border-gray-100 bg-surface-white shadow-xl"};function Ge(t,o,l,u,p,n){return y(),M("div",Qe,[S("div",{ref:"target",class:F(["flex",t.$attrs.class]),onClick:o[0]||(o[0]=(...e)=>n.updatePosition&&n.updatePosition(...e)),onFocusin:o[1]||(o[1]=(...e)=>n.updatePosition&&n.updatePosition(...e)),onKeydown:o[2]||(o[2]=(...e)=>n.updatePosition&&n.updatePosition(...e)),onMouseover:o[3]||(o[3]=(...e)=>n.onMouseover&&n.onMouseover(...e)),onMouseleave:o[4]||(o[4]=(...e)=>n.onMouseleave&&n.onMouseleave(...e))},[D(t.$slots,"target",R(L({togglePopover:n.togglePopover,updatePosition:n.updatePosition,open:n.open,close:n.close,isOpen:n.isOpen})))],34),(y(),x(Oe,{to:"#frappeui-popper-root"},[S("div",{ref:"popover",class:F(["relative z-[100]",[p.popoverContainerClass,l.popoverClass]]),style:Se({minWidth:p.targetWidth?p.targetWidth+"px":null}),onMouseover:o[5]||(o[5]=e=>p.pointerOverTargetOrPopup=!0),onMouseleave:o[6]||(o[6]=(...e)=>n.onMouseleave&&n.onMouseleave(...e))},[A(xe,R(L(n.popupTransition)),{default:I(()=>[Ie(S("div",null,[D(t.$slots,"body",R(L({togglePopover:n.togglePopover,updatePosition:n.updatePosition,open:n.open,close:n.close,isOpen:n.isOpen})),()=>[S("div",Ze,[D(t.$slots,"body-main",R(L({togglePopover:n.togglePopover,updatePosition:n.updatePosition,open:n.open,close:n.close,isOpen:n.isOpen})))])])],512),[[Me,n.isOpen]])]),_:3},16)],38)]))],512)}const tt=X(Ue,[["render",Ge]]);export{et as E,tt as P,Ye as _};
//# sourceMappingURL=Popover-bc79d26b.js.map
