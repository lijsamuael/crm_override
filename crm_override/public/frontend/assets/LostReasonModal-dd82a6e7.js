import{_ as V}from"./Link-f750ab7e.js";import{c as h}from"./FieldLayout-75a1161d.js";import{N as L,O as M,l as d,e as c,f,g as B,w as g,d as o,t as m,a6 as C,b as u,c as N,B as R,u as w,W as O}from"./index-69690053.js";const D={class:"-mt-3 mb-4 text-p-base text-ink-gray-7"},q={class:"flex flex-col gap-3"},E={class:"mb-2 text-sm text-ink-gray-5"},j={class:"mb-2 text-sm text-ink-gray-5"},F={key:0,class:"text-ink-red-2"},S={class:"flex justify-between items-center gap-2"},P={class:"flex gap-2"},z={__name:"LostReasonModal",props:L({deal:{type:Object,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const t=v,i=M(v,"modelValue"),a=d(t.deal.doc.lost_reason||""),l=d(t.deal.doc.lost_notes||""),n=d("");function _(){i.value=!1,n.value="",a.value="",l.value="",t.deal.doc.status=t.deal.originalDoc.status}function b(){if(!a.value){n.value=__("Lost reason is required");return}if(a.value==="Other"&&!l.value){n.value=__('Lost notes are required when lost reason is "Other"');return}n.value="",i.value=!1,t.deal.doc.lost_reason=a.value,t.deal.doc.lost_notes=l.value,t.deal.save.submit()}function x(s,e){h("CRM Lost Reason",s,e)}return(s,e)=>{const k=c("FormControl"),y=c("ErrorMessage"),p=c("Button");return f(),B(w(O),{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=r=>i.value=r),options:{title:s.__("Lost reason")},onClose:_},{"body-content":g(()=>[o("div",D,m(s.__("Please provide a reason for marking this deal as lost")),1),o("div",q,[o("div",null,[o("div",E,[C(m(s.__("Lost reason"))+" ",1),e[3]||(e[3]=o("span",{class:"text-ink-red-2"},"*",-1))]),u(V,{class:"form-control flex-1 truncate",value:a.value,doctype:"CRM Lost Reason",onChange:e[0]||(e[0]=r=>a.value=r),onCreate:x},null,8,["value"])]),o("div",null,[o("div",j,[C(m(s.__("Lost notes"))+" ",1),a.value=="Other"?(f(),N("span",F,"*")):R("",!0)]),u(k,{class:"form-control flex-1 truncate",type:"textarea",value:l.value,onChange:e[1]||(e[1]=r=>l.value=r.target.value)},null,8,["value"])])])]),actions:g(()=>[o("div",S,[o("div",null,[u(y,{message:n.value},null,8,["message"])]),o("div",P,[u(p,{label:s.__("Cancel"),onClick:_},null,8,["label"]),u(p,{variant:"solid",label:s.__("Save"),onClick:b},null,8,["label"])])])]),_:1},8,["modelValue","options"])}}};export{z as _};
//# sourceMappingURL=LostReasonModal-dd82a6e7.js.map
