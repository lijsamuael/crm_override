import{j as Re,J as $e,l as x,P as m,y as I,z as te,f as s,g as F,w as _,A as U,b as p,a8 as Se,S as G,T as H,ae as De,a1 as X,n as Y,ai as Be,u as y,az as Me,d as b,c as v,t as h,aw as M,F as T,r as z,B as $,ax as Te,aJ as ze,N as Fe,O as Ye,e as Q,a6 as Ae,a5 as Ee}from"./index-69690053.js";import{g as Ne,m as ne,b as le,c as Ie}from"./Link-f750ab7e.js";import{_ as Le}from"./Icon-1aad9751.js";import{D as oe}from"./index-d7cc16ab.js";const Ke={class:"flex items-center justify-between p-2 pb-0 gap-1"},Je={key:0},We={key:1},qe={key:2},Ue={class:"flex items-center"},Ge={class:"p-2"},He={key:0},Qe={class:"flex items-center text-xs font-medium uppercase text-ink-gray-4 mb-1"},Xe=["aria-selected","aria-label","onClick"],Ze={key:1,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select month"},Pe=["aria-selected","onClick"],je={key:2,class:"grid grid-cols-3 gap-1",role:"grid","aria-label":"Select year"},Oe=["aria-selected","onClick"],ea={key:0,class:"flex justify-end gap-1 p-2 border-t"},w="YYYY-MM-DD",da=Re({__name:"DateRangePicker",props:{value:{default:""},modelValue:{default:""},placement:{default:"bottom-start"},format:{},variant:{default:"subtle"},readonly:{type:Boolean,default:!1},placeholder:{default:"Select range"},inputClass:{},allowCustom:{type:Boolean,default:!0},autoClose:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},label:{},clearable:{type:Boolean}},emits:["update:modelValue","change"],setup(S,{expose:g,emit:L}){const r=S,V=L,{autoClose:D}=$e(r),c=x("date"),f=x(m().year()),i=x(m().month()),u=x(""),d=x(""),k=x(!1),C=x("");function se(e,a){return!e&&!a?"":e&&!a?K(e):`${K(e)} to ${K(a)}`}function K(e){if(!e)return"";const a=m(e);return a.isValid()&&r.format?a.format(r.format):e}const B=I(()=>se(u.value,d.value));function A(e){if(!e)return null;const a=String(e).trim();if(!a)return null;if(r.format){const l=m(a,r.format,!0);if(l.isValid())return l}const t=m(a);if(t.isValid())return t;const n=Ie(a);if(n){const l=m(n);if(l.isValid())return l}return null}function re(e){if(!e)return["",""];let a=[];Array.isArray(e)?a=e:typeof e=="string"&&(a=e.replace(/ to /i,",").replace(/ - /g,",").split(",").map(o=>o.trim()).filter(Boolean));const t=A(a[0]||""),n=A(a[1]||"");return[(t==null?void 0:t.format(w))||"",(n==null?void 0:n.format(w))||""]}function J(e){const[a,t]=re(e);if(u.value=a,d.value=t,a){const n=m(a);f.value=n.year(),i.value=n.month()}k.value||R()}const ie=r.modelValue||r.value||"";J(ie);function ue(){J(r.modelValue||r.value||"")}te(()=>[r.modelValue,r.value],([e,a])=>{J(e||a)});function R(){C.value=B.value}R(),te(B,e=>{k.value||(C.value=e)});function ce(e){if(!e.trim())return[null,null];const t=e.replace(/\s+to\s+/i,",").replace(/\s+-\s+/g,",").split(",").map(o=>o.trim()).filter(Boolean);if(!t.length)return[null,null];const n=A(t[0]),l=A(t[1]);return[n,l]}function E(e,a=!0){a&&D.value&&e&&e()}function W(e=!1,a){const t=C.value.trim();if(!t){O(),E(a,e);return}const[n,l]=ce(t);n&&(u.value=n.format(w)),l&&(d.value=l.format(w)),l||(d.value=""),j(),N(),R(),E(a,e&&!!u.value&&!!d.value)}const Z=x(null);function de(e){var t;const a=e.relatedTarget;a&&((t=Z.value)!=null&&t.contains(a))||(W(),k.value=!1)}function fe(e){W(!0,e),k.value=!1}function P(e,a){k.value=!0,e||a()}const ve=I(()=>{const e=Ne(f.value,i.value,""),a=m(u.value),t=m(d.value);return e.map(n=>n.map(l=>{const o=a.isValid()&&l.date.isSame(a,"day"),ae=t.isValid()&&l.date.isSame(t,"day"),Ve=a.isValid()&&t.isValid()&&l.date.isAfter(a,"day")&&l.date.isBefore(t,"day");return{date:l.date,key:l.key,inMonth:l.inMonth,isToday:l.isToday,isRangeStart:o,isRangeEnd:ae,inRange:Ve}}))});function me(e){const a=m(e);a.isValid()&&(u.value&&d.value?(u.value=a.format(w),d.value=""):u.value&&!d.value?d.value=a.format(w):u.value=a.format(w),j(),R())}function j(){if(u.value&&d.value&&m(u.value).isAfter(m(d.value))){const e=u.value;u.value=d.value,d.value=e}}function pe(e,a){me(e),D.value&&u.value&&d.value&&(N(),E(a,!0)),k.value=!1}function N(){if(u.value&&d.value){const e=`${u.value},${d.value}`;V("update:modelValue",e),V("change",e)}!u.value&&!d.value&&(V("update:modelValue",""),V("change",""))}function O(){u.value="",d.value="",N(),R()}function ye(e){O(),E(e),k.value=!1,c.value="date"}function he(e){const a=ze().startOf("day");u.value=a.format(w),d.value=a.format(w),N(),R(),D.value&&e&&e(),c.value="date",k.value=!1}function ge(e){i.value=e,c.value="date"}function ke(e){f.value=e,c.value="month"}function _e(){if(c.value==="date"){const e=le(f.value,i.value).subtract(1,"month");f.value=e.year(),i.value=e.month()}else c.value==="month"?f.value-=1:f.value-=12}function xe(){if(c.value==="date"){const e=le(f.value,i.value).add(1,"month");f.value=e.year(),i.value=e.month()}else c.value==="month"?f.value+=1:f.value+=12}function we(){c.value==="date"?c.value="month":c.value==="month"?c.value="year":c.value="date"}function be(){c.value="date",k.value&&(W(),k.value=!1)}const q=I(()=>f.value-f.value%12),Ce=I(()=>Array.from({length:12},(e,a)=>q.value+a));g({open:()=>{var e;return(e=ee.value)==null?void 0:e.open()}});const ee=x(null);return(e,a)=>(s(),F(y(Te),{class:"inline-block",placement:e.placement,onOpen:ue,onClose:be,ref_key:"popoverRef",ref:ee},{target:_(({togglePopover:t,isOpen:n})=>[U(e.$slots,"target",G(H({togglePopover:t,isOpen:n,displayLabel:B.value,inputValue:C.value})),()=>[p(y(Me),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=l=>C.value=l),type:"text",class:Y(["cursor-text w-full",r.inputClass]),label:r.label,variant:r.variant,placeholder:r.placeholder,disabled:r.disabled,readonly:r.readonly||!r.allowCustom,onFocus:l=>P(n,t),onClick:l=>P(n,t),onBlur:de,onKeydown:Be(X(l=>fe(t),["prevent"]),["enter"])},Se({suffix:_(()=>[U(e.$slots,"suffix",G(H({togglePopover:t,isOpen:n,displayLabel:B.value,inputValue:C.value})),()=>[p(De,{name:"chevron-down",class:"h-4 w-4 cursor-pointer",onMousedown:X(t,["prevent"])},null,8,["onMousedown"])])]),_:2},[e.$slots.prefix?{name:"prefix",fn:_(()=>[U(e.$slots,"prefix",G(H({togglePopover:t,isOpen:n,displayLabel:B.value,inputValue:C.value})))]),key:"0"}:void 0]),1032,["modelValue","class","label","variant","placeholder","disabled","readonly","onFocus","onClick","onKeydown"])])]),body:_(({togglePopover:t})=>[b("div",{ref_key:"popoverContentRef",ref:Z,class:"w-fit min-w-60 select-none text-base text-ink-gray-9 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 mt-2"},[b("div",Ke,[p(y(M),{variant:"ghost",size:"sm",class:"text-sm font-medium text-ink-gray-7",onClick:we},{default:_(()=>[c.value==="date"?(s(),v("span",Je,h(y(ne)[i.value])+" "+h(f.value),1)):c.value==="month"?(s(),v("span",We,h(f.value),1)):(s(),v("span",qe,h(q.value)+" - "+h(q.value+11),1))]),_:1}),b("div",Ue,[p(y(M),{variant:"ghost",icon:"chevron-left",class:"size-7",onClick:_e}),p(y(M),{variant:"ghost",class:"text-xs",label:"Today",onClick:()=>he(t)},null,8,["onClick"]),p(y(M),{variant:"ghost",icon:"chevron-right",class:"size-7",onClick:xe})])]),b("div",Ge,[c.value==="date"?(s(),v("div",He,[b("div",Qe,[(s(),v(T,null,z(["S","M","T","W","T","F","S"],n=>b("div",{key:n,class:"flex h-6 w-8 items-center justify-center"},h(n),1)),64))]),(s(!0),v(T,null,z(ve.value,(n,l)=>(s(),v("div",{key:l,class:"flex",role:"row"},[(s(!0),v(T,null,z(n,o=>(s(),v("button",{type:"button",key:o.key,class:Y(["flex h-8 w-8 items-center justify-center rounded cursor-pointer text-sm focus:outline-none focus:ring-2 focus:ring-outline-gray-2",[o.inMonth?"text-ink-gray-8":"text-ink-gray-3",o.isToday?"font-extrabold text-ink-gray-9":"",o.isRangeStart||o.isRangeEnd?"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":o.inRange?"bg-surface-gray-3 rounded-none":"hover:bg-surface-gray-2",o.isRangeStart&&!o.isRangeEnd?"rounded-l-md rounded-r-none":"",o.isRangeEnd&&!o.isRangeStart?"rounded-r-md rounded-l-none":"",o.isRangeStart&&o.isRangeEnd?"rounded-md":""]]),role:"gridcell","aria-selected":o.isRangeStart||o.isRangeEnd?"true":"false","aria-label":o.date.format("YYYY-MM-DD")+(o.isToday?" (Today)":""),onClick:ae=>pe(o.date,t)},h(o.date.date()),11,Xe))),128))]))),128))])):c.value==="month"?(s(),v("div",Ze,[(s(!0),v(T,null,z(y(ne),(n,l)=>(s(),v("button",{type:"button",key:n,class:Y(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":l===i.value}]),"aria-selected":l===i.value?"true":"false",onClick:o=>ge(l)},h(n.slice(0,3)),11,Pe))),128))])):(s(),v("div",je,[(s(!0),v(T,null,z(Ce.value,n=>(s(),v("button",{type:"button",key:n,class:Y(["py-2 text-sm rounded cursor-pointer text-center hover:bg-surface-gray-2 focus:outline-none focus:ring-2 focus:ring-brand-6",{"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":n===f.value}]),"aria-selected":n===f.value?"true":"false",onClick:l=>ke(n)},h(n),11,Oe))),128))]))]),u.value&&d.value?(s(),v("div",ea,[p(y(M),{size:"sm",variant:"outline",label:"Clear",onClick:()=>ye(t)},null,8,["onClick"])])):$("",!0)],512)]),_:3},8,["placement"]))}}),aa={class:"flex items-center"},ta={key:0,class:"mx-0.5 text-base text-ink-gray-4","aria-hidden":"true"},na=["onClick"],la={class:"flex items-center"},oa={class:"whitespace-nowrap"},sa={key:0,class:"flex flex-row-reverse gap-2 items-center min-w-11"},fa={__name:"ViewBreadcrumbs",props:Fe({routeName:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(S){const g=Ye(S,"modelValue"),L=r=>r.name===g.value.currentView.name;return(r,V)=>{const D=Q("router-link"),c=Q("Button"),f=Q("FeatherIcon");return s(),v("div",aa,[p(D,{to:{name:S.routeName},class:Y(["px-0.5 py-1 text-lg font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-outline-gray-3",[g.value?"text-ink-gray-5 hover:text-ink-gray-7":"text-ink-gray-7"]])},{default:_(()=>[Ae(h(r.__(S.routeName)),1)]),_:1},8,["to","class"]),g.value?(s(),v("span",ta," / ")):$("",!0),g.value?(s(),F(y(oe),{key:1,options:g.value.viewsDropdownOptions},{default:_(({open:i})=>[p(c,{variant:"ghost",class:"text-lg font-medium text-nowrap",label:r.__(g.value.currentView.label),iconRight:i?"chevron-up":"chevron-down"},{prefix:_(()=>[p(Le,{icon:g.value.currentView.icon,class:"h-4"},null,8,["icon"])]),_:1},8,["label","iconRight"])]),item:_(({item:i,close:u})=>[b("button",{class:"group flex text-ink-gray-6 gap-4 h-7 w-full justify-between items-center rounded px-2 text-base hover:bg-surface-gray-3",onClick:i.onClick},[b("div",la,[i.icon&&typeof i.icon=="string"?(s(),F(f,{key:0,name:i.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7","aria-hidden":"true"},null,8,["name"])):i.icon?(s(),F(Ee(i.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7"})):$("",!0),b("span",oa,h(i.label),1)]),i.name?(s(),v("div",sa,[p(y(oe),{placement:"right-start",options:g.value.viewActions(i,u)},{default:_(()=>[p(c,{variant:"ghost",class:"!size-5 hidden group-hover:block",icon:"more-horizontal",onClick:V[0]||(V[0]=X(()=>{},["stop"]))})]),_:1},8,["options"]),L(i)?(s(),F(f,{key:0,name:"check",class:"size-4 text-ink-gray-7"})):$("",!0)])):$("",!0)],8,na)]),_:1},8,["options"])):$("",!0)])}}};export{fa as _,da as a};
//# sourceMappingURL=ViewBreadcrumbs-4b359d23.js.map
